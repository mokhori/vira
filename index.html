
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ุงูพูฺฉุดู Vira</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    /* Custom Scrollbar Hide */
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

    /* Animation Classes */
    .fade-in { animation: fadeIn 0.3s ease-in-out; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* Font Setup */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }

    /* Make SVG strokes scale nicely */
    svg { shape-rendering: geometricPrecision; }
  </style>
</head>

<body class="bg-gray-100 min-h-dvh flex items-center justify-center font-sans text-gray-800">

  <!--
    RESPONSIVE CHANGES:
    - On mobile: app takes full width + full height (no heavy borders), like a real app
    - On tablet/laptop: centered "phone frame" with border/ring and fixed-ish height
    - Main scrolling is inside <main>, bottom nav stays stuck to bottom
  -->
  <div class="w-full min-h-dvh sm:min-h-0 sm:h-[800px] sm:max-h-[90vh]
              max-w-none sm:max-w-md
              bg-white overflow-hidden flex flex-col relative
              rounded-none sm:rounded-[40px]
              shadow-none sm:shadow-2xl
              border-0 sm:border-8 sm:border-gray-900
              ring-0 sm:ring-4 sm:ring-gray-200">

    <!-- Status Bar -->
    <div class="h-8 bg-white w-full flex justify-between items-center px-4 sm:px-6 pt-2 select-none z-20 shrink-0">
      <span class="text-[10px] font-bold text-gray-800">น:ดฑ</span>
      <div class="flex gap-1.5">
        <div class="w-4 h-4 rounded-full bg-black/10"></div>
        <div class="w-4 h-4 rounded-full bg-black/10"></div>
      </div>
    </div>

    <!-- Main Content Area -->
    <main id="main-container" class="flex-1 overflow-y-auto overflow-x-hidden
                                     p-4 sm:p-6
                                     pb-28 sm:pb-24
                                     scrollbar-hide transition-all duration-300
                                     ">

      <!-- PAGE: HOME -->
      <div id="page-home" class="page-content fade-in block">
        <header class="flex justify-between items-center mb-6 sm:mb-8">
          <div>
            <h1 class="text-xl sm:text-2xl font-bold text-gray-800">ุตุจุญ ุจุฎุฑุ ุฏู ุขุฑุงู!</h1>
            <p class="text-sm text-gray-500 mt-1">ุงูุฑูุฒุช ุฑู ฺุทูุฑ ุดุฑูุน ฺฉุฑุฏุ</p>
          </div>
          <div class="w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center text-teal-700 font-bold shadow-sm overflow-hidden">
            <img src="images/profile.jpg" class="w-full h-full object-cover" alt="Profile">
          </div>
        </header>

        <!-- Quote Card -->
        <div class="bg-gradient-to-br from-teal-500 to-emerald-600 rounded-3xl p-5 sm:p-6 text-white shadow-lg relative overflow-hidden mb-6">
          <div class="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
            <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
              <path fill="#FFFFFF" d="M44.7,-76.4C58.9,-69.2,71.8,-59.1,79.6,-46.3C87.4,-33.5,90.1,-18,87.9,-3.3C85.7,11.4,78.6,25.3,69.5,37.3C60.4,49.3,49.3,59.4,36.9,65.8C24.5,72.2,10.8,74.9,-1.8,78C-14.4,81.1,-27.2,84.6,-38.6,79.5C-50,74.4,-60,60.7,-68.2,46.5C-76.4,32.3,-82.8,17.6,-82.3,3.3C-81.8,-11,-74.4,-24.9,-64.5,-36.3C-54.6,-47.7,-42.2,-56.6,-29.4,-64.4C-16.6,-72.2,-3.4,-78.9,9.4,-78.5C22.2,-78.1,30.5,-70.6,44.7,-76.4Z" transform="translate(100 100)" />
            </svg>
          </div>
          <div class="relative z-10">
            <h3 class="font-bold text-lg mb-2 opacity-90">ุฌููู ุฑูุฒ</h3>
            <p id="daily-quote" class="text-base sm:text-lg leading-relaxed font-light">"ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ..."</p>
          </div>
        </div>

        <!-- Mood Selector -->
        <div class="mb-6">
          <h3 class="text-lg font-bold text-gray-800 mb-4">ุงูุงู ฺู ุญุณ ุฏุงุฑุ</h3>
          <div class="grid grid-cols-3 gap-3 sm:gap-4">
            <button onclick="setMood('great')" id="btn-mood-great"
                    class="mood-btn flex flex-col items-center p-3 sm:p-4 rounded-2xl transition-all duration-300 bg-white shadow-sm hover:bg-gray-50 border border-transparent">
              <div class="mb-2 text-gray-500 icon-container">
                <i data-lucide="smile" class="w-7 h-7 sm:w-8 sm:h-8"></i>
              </div>
              <span class="text-sm font-medium text-gray-600 label-text">ุนุงู</span>
            </button>

            <button onclick="setMood('meh')" id="btn-mood-meh"
                    class="mood-btn flex flex-col items-center p-3 sm:p-4 rounded-2xl transition-all duration-300 bg-white shadow-sm hover:bg-gray-50 border border-transparent">
              <div class="mb-2 text-gray-500 icon-container">
                <i data-lucide="meh" class="w-7 h-7 sm:w-8 sm:h-8"></i>
              </div>
              <span class="text-sm font-medium text-gray-600 label-text">ูุนููู</span>
            </button>

            <button onclick="setMood('bad')" id="btn-mood-bad"
                    class="mood-btn flex flex-col items-center p-3 sm:p-4 rounded-2xl transition-all duration-300 bg-white shadow-sm hover:bg-gray-50 border border-transparent">
              <div class="mb-2 text-gray-500 icon-container">
                <i data-lucide="frown" class="w-7 h-7 sm:w-8 sm:h-8"></i>
              </div>
              <span class="text-sm font-medium text-gray-600 label-text">ุฎุณุชู</span>
            </button>
          </div>
        </div>

        <!-- Suggestion Box (Hidden initially) -->
        <div id="suggestion-box" class="hidden bg-blue-50 mb-5 rounded-2xl p-5 border border-blue-100 flex items-start gap-4 fade-in">
          <div class="bg-white p-2 rounded-full shadow-sm text-blue-500">
            <i data-lucide="music" class="w-6 h-6"></i>
          </div>
          <div>
            <h4 class="font-bold text-blue-800 text-sm mb-1">ูพุดููุงุฏ ููุดููุฏ</h4>
            <p id="suggestion-text" class="text-xs text-blue-600 leading-relaxed"></p>
          </div>
        </div>

        
        <!-- Search Bar -->
        <div class="relative mb-3 group">
            <input id="search-input" autocomplete="off" type="text" placeholder="ุฌุณุชุฌู ุจุฑุง ุงููุช..."
                   class="w-full bg-white border border-gray-100 rounded-2xl
                          py-3 px-4 pr-10 text-sm
                          focus:outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500
                          transition-all shadow-sm text-gray-600 placeholder-gray-400
                          group-hover:shadow-md" />
            <i data-lucide="search" class="w-4 h-4 text-gray-400 absolute right-3 top-3.5"></i>
          </div>


        <!-- Nearby Opportunities -->
<div class="mb-20">
    <div class="flex justify-between items-end mb-3">
      <h3 class="text-base font-bold text-gray-800">ูุฑุตุชโูุง ุงุทุฑุงู ุดูุง</h3>
      <button class="text-xs text-teal-600 font-bold hover:underline">ุฏุฏู ุฑู ููุดู</button>
    </div>
  
    <!-- Results meta -->
    <p id="opps-meta" class="text-[11px] text-gray-400 mb-3"></p>
  
    <!-- List -->
    <div id="opportunities-list" class="space-y-3"></div>
  
    <!-- Show more -->
    <button id="opps-show-more"
    class="hidden w-full mt-3 bg-gray-50 hover:bg-gray-100 border border-gray-200 text-gray-700 font-bold text-sm py-3 rounded-2xl transition">
    ููุงุด ุจุดุชุฑ
    </button>



    <!-- Empty state -->
    <div id="opps-empty" class="hidden mt-4 bg-gray-50 border border-gray-100 rounded-2xl p-4 text-sm text-gray-500">
      ูุชุฌูโุง ูพุฏุง ูุดุฏ. ุนุจุงุฑุช ุฌุณุชุฌู ุฑุง ุชุบุฑ ุจุฏู.
    </div>
  </div>
  
      </div>

    <!-- PAGE: OPPORTUNITY DETAIL -->
<div id="page-opportunity" class="page-content hidden fade-in space-y-5">
    <header class="flex items-center gap-3">
      <button onclick="closeOpportunityDetail()"
              class="w-10 h-10 rounded-2xl bg-gray-50 border border-gray-100 flex items-center justify-center hover:bg-gray-100 transition">
        <i data-lucide="chevron-right" class="w-5 h-5 text-gray-600"></i>
      </button>
      <div class="min-w-0">
        <h1 id="opp-detail-title" class="text-lg font-bold text-gray-800 truncate">โ</h1>
        <p id="opp-detail-sub" class="text-sm text-gray-500 mt-0.5 truncate">โ</p>
      </div>
    </header>
  
    <div class="bg-gray-100 rounded-3xl overflow-hidden h-48 sm:h-56 relative">
      <img id="opp-detail-img" src="" alt="" class="absolute inset-0 w-full h-full object-cover">
      <div class="absolute inset-0 bg-gradient-to-t from-black/40 via-black/10 to-transparent"></div>
      <div class="absolute bottom-3 right-3 left-3 flex items-end justify-between gap-3">
        <div class="min-w-0">
          <p id="opp-detail-type" class="text-[11px] text-white/80 font-semibold"></p>
          <p id="opp-detail-loc" class="text-sm text-white font-bold truncate"></p>
        </div>
        <span id="opp-detail-badge" class="shrink-0 text-[10px] bg-white/90 text-gray-700 px-2 py-1 rounded-lg font-bold"></span>
      </div>
    </div>
  
    <div class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100">
      <div class="flex items-center gap-2 mb-2 text-teal-700">
        <i data-lucide="info" class="w-4 h-4"></i>
        <h3 class="font-bold text-gray-800 text-sm">ุฌุฒุฆุงุช</h3>
      </div>
      <p id="opp-detail-desc" class="text-sm text-gray-600 leading-relaxed text-justify">โ</p>
  
      <div id="opp-detail-tags" class="flex flex-wrap gap-2 mt-4"></div>

      <!-- Rating -->
<div class="mt-5 pt-4 border-t border-gray-50">
    <div class="flex items-center justify-between">
      <h3 class="font-bold text-gray-800 text-sm">ุงูุชุงุฒ ฺฉุงุฑุจุฑุงู</h3>
      <div id="opp-detail-rating" class="flex items-center"></div>
    </div>
    <p id="opp-detail-reviews-count" class="text-[11px] text-gray-400 mt-1"></p>
  </div>
  
  <!-- Reviews -->
  <div class="mt-4">
    <h3 class="font-bold text-gray-800 text-sm mb-3">ูุธุฑุงุช ฺฉุงุฑุจุฑุงู</h3>
    <div id="opp-detail-reviews" class="space-y-3"></div>
  </div>
  
  
      <button class="mt-5 w-full bg-teal-600 hover:bg-teal-700 text-white font-bold text-sm py-3 rounded-2xl transition">
        ุดุฑฺฉุช / ุงุฏุงูู
      </button>
    </div>
  
    <div class="h-20"></div>
  </div>
  

      <!-- PAGE: ROUTES -->
      <div id="page-routes" class="page-content hidden fade-in h-full flex flex-col">
        <header>
          <h1 class="text-2xl font-bold text-gray-800">ุงูุชุฎุงุจ ูุณุฑ</h1>
          <p class="text-sm text-gray-500 mt-1">ฺฉุฌุง ูโุฎูุงู ุจุฑูุ</p>
        </header>

        <!-- Destination Search -->
<div class="relative mt-5">
    <input id="routes-destination-search" type="text" placeholder="ุฌุณุชุฌู ููุตุฏ... (ูุซูุงู ูพุงุฑฺฉ ูุงูู)"
           class="w-full bg-white border border-gray-100 rounded-2xl
                  py-3 px-4 pr-10 text-sm
                  focus:outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500
                  transition-all shadow-sm text-gray-700 placeholder-gray-400" />
    <i data-lucide="search" class="w-4 h-4 text-gray-400 absolute right-3 top-3.5"></i>
  
    <!-- Suggestions -->
    <div id="routes-destination-suggestions"
         class="hidden absolute z-30 mt-2 w-full bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden">
    </div>
  </div>
  

        <!-- Map Area (Responsive height) -->
        <div class="bg-gray-100 rounded-3xl h-56 sm:h-64 w-full relative overflow-hidden shadow-inner flex items-center justify-center my-6 shrink-0">
          <img src="images/map2.jpg" class="absolute inset-0 w-full h-full object-cover opacity-50" alt="City Map Background">

          <svg class="absolute inset-0 w-full h-full pointer-events-none z-10" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 350 240" preserveAspectRatio="none">
            <path id="route-line-1" d="M50 200 Q 100 100 300 50" stroke="#EAB308" stroke-width="4" fill="none" stroke-dasharray="5,5" class="transition-opacity duration-300 opacity-30" />
            <path id="route-line-2" d="M50 200 C 100 200 150 100 300 50" stroke="#22C55E" stroke-width="5" fill="none" class="transition-opacity duration-300 opacity-100" />
            <path id="route-line-3" d="M50 200 Q 200 200 300 50" stroke="#3B82F6" stroke-width="4" fill="none" class="transition-opacity duration-300 opacity-30" />
            <circle cx="50" cy="200" r="6" fill="#475569" />
            <circle cx="300" cy="50" r="6" fill="#EF4444" />
          </svg>

          <div class="z-20 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full text-xs font-bold text-gray-600 shadow-sm flex items-center gap-2 border border-gray-200">
            <i data-lucide="map-pin" class="w-3 h-3 text-red-500"></i>
            ููุตุฏ: <span id="routes-destination-label">ุฏูุชุฑ ูุฑฺฉุฒ</span>

          </div>
        </div>

        <div class="flex-1 pb-24 sm:pb-20">
            <h3 class="font-bold text-gray-700 mb-2">ูุณุฑูุง ูพุดููุงุฏ</h3>
            <div id="routes-list" class="space-y-3"></div>
          </div>
          
      </div>

      <!-- PAGE: MASLOW -->
      <div id="page-maslow" class="page-content hidden fade-in h-full flex flex-col space-y-6">
        <header>
          <h1 class="text-2xl font-bold text-gray-800">ูุฑู ุดุงุฏ ูู</h1>
          <p class="text-sm text-gray-500 mt-1">ูุถุนุช ฺฉููู ูุงุฒูุง ุดูุง</p>
        </header>

        <div class="flex-1 flex flex-col items-center justify-center relative py-4">
          <div class="w-full max-w-xs flex flex-col gap-1.5" id="maslow-container">
            <div onclick="toggleMaslow(5)" id="maslow-5"
                 class="maslow-level w-[30%] h-12 hover:scale-105 bg-purple-500 mx-auto rounded-lg flex flex-col items-center justify-center text-white font-bold text-sm relative cursor-pointer transition-all duration-500 px-3">
              <span class="level-title">ุฎูุฏุดฺฉููุง</span>
              <div class="level-detail hidden absolute bottom-2 left-0 right-0 px-4 text-center">
                <p class="text-[10px] text-white/90 font-normal leading-tight">ุฑุดุฏ ุดุฎุตุ ูุนูุงุ ุฎูุงูุช</p>
                <div class="w-full bg-white/30 h-1.5 rounded-full mt-2 overflow-hidden">
                  <div class="bg-white h-full rounded-full" style="width: 70%"></div>
                </div>
              </div>
            </div>

            <div onclick="toggleMaslow(4)" id="maslow-4"
                 class="maslow-level w-[45%] h-12 hover:scale-105 bg-indigo-500 mx-auto rounded-lg flex flex-col items-center justify-center text-white font-bold text-sm relative cursor-pointer transition-all duration-500">
              <span class="level-title">ุงุญุชุฑุงู ู ุงุฑุฒุดููุฏ</span>
              <div class="level-detail hidden absolute bottom-2 left-0 right-0 px-4 text-center">
                <p class="text-[10px] text-white/90 font-normal leading-tight">ุนุฒุช ููุณุ ุฏุณุชุงูุฑุฏูุงุ ุงุญุชุฑุงู</p>
                <div class="w-full bg-white/30 h-1.5 rounded-full mt-2 overflow-hidden">
                  <div class="bg-white h-full rounded-full" style="width: 85%"></div>
                </div>
              </div>
            </div>

            <div onclick="toggleMaslow(3)" id="maslow-3"
                 class="maslow-level w-[60%] h-12 hover:scale-105 bg-pink-500 mx-auto rounded-lg flex flex-col items-center justify-center text-white font-bold text-sm relative cursor-pointer transition-all duration-500">
              <span class="level-title">ุชุนูู ู ุนุดู</span>
              <div class="level-detail hidden absolute bottom-2 left-0 right-0 px-4 text-center">
                <p class="text-[10px] text-white/90 font-normal leading-tight">ุฏูุณุชุ ุฎุงููุงุฏูุ ุงุฑุชุจุงุทุงุช</p>
                <div class="w-full bg-white/30 h-1.5 rounded-full mt-2 overflow-hidden">
                  <div class="bg-white h-full rounded-full" style="width: 45%"></div>
                </div>
              </div>
            </div>

            <div onclick="toggleMaslow(2)" id="maslow-2"
                 class="maslow-level w-[80%] h-12 hover:scale-105 bg-blue-500 mx-auto rounded-lg flex flex-col items-center justify-center text-white font-bold text-sm relative cursor-pointer transition-all duration-500">
              <span class="level-title">ุงููุช</span>
              <div class="level-detail hidden absolute bottom-2 left-0 right-0 px-4 text-center">
                <p class="text-[10px] text-white/90 font-normal leading-tight">ุงููุช ุดุฎุตุ ุดุบูุ ุณูุงูุช</p>
                <div class="w-full bg-white/30 h-1.5 rounded-full mt-2 overflow-hidden">
                  <div class="bg-white h-full rounded-full" style="width: 90%"></div>
                </div>
              </div>
            </div>

            <div onclick="toggleMaslow(1)" id="maslow-1"
                 class="maslow-level w-full h-12 hover:scale-105 bg-orange-500 mx-auto rounded-lg flex flex-col items-center justify-center text-white font-bold text-sm relative cursor-pointer transition-all duration-500">
              <span class="level-title">ูุงุฒูุง ูุฒูููฺฺฉ</span>
              <div class="level-detail hidden absolute bottom-2 left-0 right-0 px-4 text-center">
                <p class="text-[10px] text-white/90 font-normal leading-tight">ุบุฐุงุ ุขุจุ ุฎูุงุจุ ูพูุงูฺฏุงู</p>
                <div class="w-full bg-white/30 h-1.5 rounded-full mt-2 overflow-hidden">
                  <div class="bg-white h-full rounded-full" style="width: 95%"></div>
                </div>
              </div>
            </div>
          </div>

          <p class="text-xs text-center text-gray-400 mt-8 max-w-[260px]">
            ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ู ูพุดุฑูุช ุฎูุฏุ ุฑู ูุฑ ูุงู ุงุฒ ูุฑู ุถุฑุจู ุจุฒูุฏ.
          </p>
        </div>

        <div class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100">
          <div class="flex items-center gap-3 mb-3">
            <i data-lucide="trending-up" class="text-teal-600 w-5 h-5"></i>
            <h3 class="font-bold text-gray-800 text-sm">ุชุญูู ููุดููุฏ</h3>
          </div>
          <p class="text-xs text-gray-500 leading-relaxed text-justify">
            ุฏู ุขุฑุงู ุนุฒุฒุ ูุงุฒูุง ูพุงู ู ุงููุช ุดูุง ุฏุฑ ูุถุนุช ูพุงุฏุงุฑ ูุฑุงุฑ ุฏุงุฑูุฏ. ูพุดููุงุฏ ูโฺฉูู ุงู ููุชู ุชูุฑฺฉุฒ ุจุดุชุฑ ุฑู ูุงู ยซุชุนููยป ุฏุงุดุชู ุจุงุดุฏ. ุดุฑฺฉุช ุฏุฑ ุฑูุฏุงุฏูุง ฺฏุฑูู ูโุชูุงูุฏ ููุฏ ุจุงุดุฏ.
          </p>
        </div>
      </div>

      <!-- PAGE: STATS -->
      <div id="page-stats" class="page-content hidden fade-in space-y-6">
        <header>
          <h1 class="text-2xl font-bold text-gray-800">ุขูุงุฑ ุจูุฒุณุช</h1>
          <p class="text-sm text-gray-500 mt-1">ุฑููุฏ ุชุบุฑุงุช ุญุงู ุฎูุจ ุชู</p>
        </header>

        <div class="bg-white p-5 sm:p-6 rounded-3xl shadow-sm border border-gray-100">
          <div class="flex justify-between items-start mb-6">
            <div>
              <h3 class="text-gray-800 font-bold mb-1">ุฑุถุงุช ุงุฒ ุฒูุฏฺฏ</h3>
              <p class="text-xs text-gray-400">ูุงูฺฏู ููุชฺฏ</p>
            </div>
            <div class="text-right">
              <span class="text-3xl font-extrabold text-teal-600">ท.ธ</span>
              <div class="flex items-center justify-end gap-1 text-green-500 mt-1">
                <i data-lucide="trending-up" class="w-3 h-3"></i>
                <span class="text-[10px] font-bold">ฑฒูช ุฑุดุฏ</span>
              </div>
            </div>
          </div>

          <div class="relative h-40 w-full">
            <div class="absolute inset-0 flex flex-col justify-between text-[10px] text-gray-300 pointer-events-none">
              <div class="border-b border-gray-100 w-full h-0"></div>
              <div class="border-b border-gray-100 w-full h-0"></div>
              <div class="border-b border-gray-100 w-full h-0"></div>
              <div class="border-b border-gray-100 w-full h-0"></div>
              <div class="border-b border-gray-100 w-full h-0"></div>
            </div>

            <svg class="absolute inset-0 w-full h-full overflow-visible" preserveAspectRatio="none">
              <defs>
                <linearGradient id="chartGradient" x1="0" x2="0" y1="0" y2="1">
                  <stop offset="0%" stop-color="#14b8a6" stop-opacity="0.2" />
                  <stop offset="100%" stop-color="#14b8a6" stop-opacity="0" />
                </linearGradient>
              </defs>

              <path d="M0,80 L0,120 L50,100 L100,110 L150,50 L200,70 L250,30 L300,50 L300,160 L0,160 Z"
                    fill="url(#chartGradient)" stroke="none" />
              <polyline points="0,120 50,100 100,110 150,50 200,70 250,30 300,50"
                        fill="none" stroke="#0d9488" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" vector-effect="non-scaling-stroke" />
              <circle cx="0%" cy="120" r="3" class="fill-white stroke-teal-600 stroke-2" />
              <circle cx="16.6%" cy="100" r="3" class="fill-white stroke-teal-600 stroke-2" />
              <circle cx="33.3%" cy="110" r="3" class="fill-white stroke-teal-600 stroke-2" />
              <circle cx="50%" cy="50" r="3" class="fill-white stroke-teal-600 stroke-2" />
              <circle cx="66.6%" cy="70" r="3" class="fill-white stroke-teal-600 stroke-2" />
              <circle cx="83.3%" cy="30" r="3" class="fill-white stroke-teal-600 stroke-2" />
              <circle cx="100%" cy="50" r="3" class="fill-white stroke-teal-600 stroke-2" />
            </svg>
          </div>

          <div class="flex justify-between mt-2 text-[10px] text-gray-400">
            <span>ุด</span><span></span><span>ุฏ</span><span>ุณ</span><span>ฺ</span><span>ูพ</span><span>ุฌ</span>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div class="bg-orange-50 p-4 rounded-2xl flex flex-col items-center justify-center text-center">
            <div class="w-8 h-8 rounded-full bg-orange-100 text-orange-500 flex items-center justify-center mb-2">
              <i data-lucide="flame" class="w-5 h-5"></i>
            </div>
            <span class="text-2xl font-bold text-gray-800">ฑฒ</span>
            <span class="text-[10px] text-gray-500 mt-1">ุฑูุฒ ุชุฏุงูู</span>
          </div>
          <div class="bg-indigo-50 p-4 rounded-2xl flex flex-col items-center justify-center text-center">
            <div class="w-8 h-8 rounded-full bg-indigo-100 text-indigo-500 flex items-center justify-center mb-2">
              <i data-lucide="moon" class="w-5 h-5"></i>
            </div>
            <span class="text-2xl font-bold text-gray-800">ท.ต</span>
            <span class="text-[10px] text-gray-500 mt-1">ุณุงุนุช ุฎูุงุจ</span>
          </div>
        </div>

        <div class="bg-white p-5 sm:p-6 rounded-3xl shadow-sm border border-gray-100 mb-20">
          <h3 class="text-gray-800 font-bold mb-6">ุชุญูู ุงุญุณุงุณุงุช ููุชู</h3>

          <div class="flex flex-col sm:flex-row items-start sm:items-center gap-6">
            <div class="relative w-32 h-32 rounded-full shrink-0"
                 style="background: conic-gradient(#fb923c 0% 25%, #3b82f6 25% 60%, #2dd4bf 60% 100%);">
              <div class="absolute inset-0 m-auto w-24 h-24 bg-white rounded-full flex items-center justify-center flex-col">
                <span class="text-xs text-gray-400">ุซุจุช ุดุฏู</span>
                <span class="text-xl font-bold text-gray-800">ฒธ</span>
              </div>
            </div>

            <div class="flex flex-col gap-3 w-full">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <span class="w-3 h-3 rounded-full bg-teal-400"></span>
                  <span class="text-xs text-gray-600">ุนุงู</span>
                </div>
                <span class="text-xs font-bold text-gray-800">ดฐูช</span>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <span class="w-3 h-3 rounded-full bg-blue-500"></span>
                  <span class="text-xs text-gray-600">ูุนููู</span>
                </div>
                <span class="text-xs font-bold text-gray-800">ณตูช</span>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <span class="w-3 h-3 rounded-full bg-orange-400"></span>
                  <span class="text-xs text-gray-600">ุฎุณุชู</span>
                </div>
                <span class="text-xs font-bold text-gray-800">ฒตูช</span>
              </div>
            </div>
          </div>

          <div class="mt-6 pt-4 border-t border-gray-50">
            <p class="text-xs text-gray-500 leading-relaxed text-justify">
              <span class="font-bold text-teal-600">ุชุญูู:</span>
              ูุณุจุช ุจู ููุชู ฺฏุฐุดุชู ุงุญุณุงุณุงุช ูุซุจุช ุจุดุชุฑ ุซุจุช ฺฉุฑุฏูโุงุฏ. ุฑููุฏ ูุนู ูุดุงูโุฏููุฏู ุจูุจูุฏ ุฏุฑ ูุฏุฑุช ุงุณุชุฑุณ ุงุณุช.
            </p>
          </div>
        </div>
      </div>

      <!-- PAGE: PROFILE -->
      <div id="page-profile" class="page-content hidden fade-in space-y-6">
        <header>
          <h1 class="text-2xl font-bold text-gray-800">ูพุฑููุงู ฺฉุงุฑุจุฑ</h1>
          <p class="text-sm text-gray-500 mt-1">ุชูุธูุงุช ู ุงุทูุงุนุงุช ุดุฎุต</p>
        </header>

        <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100 flex flex-col items-center">
          <div class="relative">
            <div class="w-24 h-24 bg-teal-100 rounded-full flex items-center justify-center text-teal-700 text-3xl font-bold mb-4 shadow-inner overflow-hidden">
              <img src="images/profile.jpg" class="w-full h-full object-cover" alt="Profile">
            </div>
            <div class="absolute bottom-4 left-0 bg-yellow-400 border-2 border-white w-6 h-6 rounded-full flex items-center justify-center">
              <i data-lucide="star" class="w-3 h-3 text-white fill-current"></i>
            </div>
          </div>
          <h2 class="text-xl font-bold text-gray-800">ุฏู ุขุฑุงู ุดูุดุชุฑ</h2>
          <p class="text-sm text-gray-500">ุนุถู ุทูุง | ุชูุฑุงู</p>

          <div class="flex gap-4 mt-6 w-full">
            <div class="flex-1 bg-gray-50 rounded-2xl p-3 text-center">
              <span class="block text-lg font-bold text-teal-600">ฑฒ</span>
              <span class="text-[10px] text-gray-400">ุฑูุฒ ูุนุงูุช</span>
            </div>
            <div class="flex-1 bg-gray-50 rounded-2xl p-3 text-center">
              <span class="block text-lg font-bold text-teal-600">ดธ</span>
              <span class="text-[10px] text-gray-400">ุงูุชุงุฒ ุดุงุฏ</span>
            </div>
          </div>
        </div>

        <div class="space-y-3 pb-20">
          <button class="w-full bg-white p-4 rounded-2xl flex items-center justify-between shadow-sm border border-transparent hover:border-gray-200 transition-all group">
            <div class="flex items-center gap-3">
              <div class="bg-blue-50 text-blue-500 p-2 rounded-lg group-hover:bg-blue-100 transition-colors">
                <i data-lucide="settings" class="w-5 h-5"></i>
              </div>
              <span class="font-bold text-gray-700 text-sm">ุชูุธูุงุช</span>
            </div>
            <i data-lucide="chevron-left" class="w-5 h-5 text-gray-400"></i>
          </button>

          <button class="w-full bg-white p-4 rounded-2xl flex items-center justify-between shadow-sm border border-transparent hover:border-gray-200 transition-all group">
            <div class="flex items-center gap-3">
              <div class="bg-purple-50 text-purple-500 p-2 rounded-lg group-hover:bg-purple-100 transition-colors">
                <i data-lucide="bell" class="w-5 h-5"></i>
              </div>
              <span class="font-bold text-gray-700 text-sm">ุงุนูุงูโูุง</span>
            </div>
            <div class="bg-red-500 text-white text-[10px] w-5 h-5 rounded-full flex items-center justify-center">ฒ</div>
          </button>

          <button class="w-full bg-white p-4 rounded-2xl flex items-center justify-between shadow-sm border border-transparent hover:border-gray-200 transition-all group">
            <div class="flex items-center gap-3">
              <div class="bg-teal-50 text-teal-600 p-2 rounded-lg group-hover:bg-teal-100 transition-colors">
                <i data-lucide="heart-handshake" class="w-5 h-5"></i>
              </div>
              <span class="font-bold text-gray-700 text-sm">ูพุดุชุจุงู</span>
            </div>
            <i data-lucide="chevron-left" class="w-5 h-5 text-gray-400"></i>
          </button>

          <button class="w-full bg-white p-4 rounded-2xl flex items-center justify-between shadow-sm border border-transparent hover:border-red-100 transition-all group mt-4">
            <div class="flex items-center gap-3">
              <div class="bg-red-50 text-red-500 p-2 rounded-lg group-hover:bg-red-100 transition-colors">
                <i data-lucide="log-out" class="w-5 h-5"></i>
              </div>
              <span class="font-bold text-red-600 text-sm">ุฎุฑูุฌ ุงุฒ ุญุณุงุจ</span>
            </div>
          </button>
        </div>
      </div>
    </main>

    <!-- Bottom Navigation Bar (responsive padding + safe area) -->
    <div class="fixed sm:absolute bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-100
                h-20 px-4 sm:px-6 flex justify-between items-start z-30
                pb-[env(safe-area-inset-bottom)]">
      <button onclick="switchTab('home')" class="nav-btn w-full flex flex-col items-center justify-center py-3 text-teal-600 transition-colors duration-300" id="nav-home">
        <i data-lucide="sun" class="w-6 h-6"></i>
        <span class="text-[10px] mt-1 font-medium">ุงูุฑูุฒ</span>
      </button>

      <button onclick="switchTab('routes')" class="nav-btn w-full flex flex-col items-center justify-center py-3 text-gray-400 hover:text-gray-600 transition-colors duration-300" id="nav-routes">
        <i data-lucide="map" class="w-6 h-6"></i>
        <span class="text-[10px] mt-1 font-medium">ูุณุฑ</span>
      </button>

      <div class="relative -top-6 group cursor-pointer" onclick="switchTab('maslow')">
        <div id="fab-maslow" class="w-14 h-14 rounded-full flex items-center justify-center shadow-lg shadow-teal-500/30 transition-all duration-300 bg-gray-800 hover:scale-105">
          <i data-lucide="award" class="text-white w-6 h-6"></i>
        </div>
        <span id="label-maslow" class="absolute -bottom-5 w-full text-center text-[10px] font-medium transition-colors text-gray-400">ูุฑู ูู</span>
      </div>

      <button onclick="switchTab('stats')" class="nav-btn w-full flex flex-col items-center justify-center py-3 text-gray-400 hover:text-gray-600 transition-colors duration-300" id="nav-stats">
        <i data-lucide="bar-chart-2" class="w-6 h-6"></i>
        <span class="text-[10px] mt-1 font-medium">ุขูุงุฑ</span>
      </button>

      <button onclick="switchTab('profile')" class="nav-btn w-full flex flex-col items-center justify-center py-3 text-gray-400 hover:text-gray-600 transition-colors duration-300" id="nav-profile">
        <i data-lucide="user" class="w-6 h-6"></i>
        <span class="text-[10px] mt-1 font-medium">ูพุฑููุงู</span>
      </button>
    </div>
  </div>

  <!-- Application Logic -->
  <script>
    // Data
    const QUOTES = [
      "ุฒูุฏฺฏ ูุงููุฏ ุฏูฺุฑุฎู ุณูุงุฑ ุงุณุช. ุจุฑุง ุญูุธ ุชุนุงุฏู ุจุงุฏ ุจู ุญุฑฺฉุช ุงุฏุงูู ุฏูุฏ.",
      "ุดุงุฏ ฺฉ ุฌูุช ุงุณุชุ ูู ฺฉ ูฺฉุงู.",
      "ูุฑ ุฑูุฒ ฺฉ ุดุฑูุน ุชุงุฒู ุงุณุช. ููุณ ุนูู ุจฺฉุด ู ุฏูุจุงุฑู ุดุฑูุน ฺฉู.",
      "ุจูุชุฑู ููุธุฑู ุจุนุฏ ุงุฒ ุณุฎุชโุชุฑู ุตุนูุฏ ูโุขุฏ."
    ];

    const ROUTES_DATA = [
      { id: 1, color: 'border-yellow-200 bg-yellow-50', iconClass: 'text-yellow-500' },
      { id: 2, color: 'border-green-200 bg-green-50', iconClass: 'text-green-500' },
      { id: 3, color: 'border-blue-200 bg-blue-50', iconClass: 'text-blue-500' }
    ];

    const DESTINATIONS = [
  { id: 'hq',     name: 'ุฏูุชุฑ ูุฑฺฉุฒ',     area: 'ูุฑฺฉุฒ ุดูุฑ',   baseMinutes: 18, baseKm: 6.4 },
  { id: 'laleh',  name: 'ูพุงุฑฺฉ ูุงูู',      area: 'ุงูุฑุขุจุงุฏ',   baseMinutes: 22, baseKm: 7.9 },
  { id: 'ab_o_atash', name: 'ูพุงุฑฺฉ ุขุจโูโุขุชุด', area: 'ุนุจุงุณโุขุจุงุฏ', baseMinutes: 25, baseKm: 9.2 },
  { id: 'naderi', name: 'ฺฉุงูู ูุงุฏุฑ',     area: 'ุฎุงุจุงู ุฌูููุฑ', baseMinutes: 16, baseKm: 5.1 },
  { id: 'mellat', name: 'ูพุงุฑฺฉ ููุช',       area: 'ููุนุตุฑ',    baseMinutes: 28, baseKm: 11.3 },
];

const ROUTE_TEMPLATES = [
  {
    id: 1,
    title: 'ุณุฑุนโุชุฑู ูุณุฑ',
    icon: 'zap',
    color: 'border-yellow-200 bg-yellow-50',
    iconClass: 'text-yellow-500',
    meta: { minutesDelta: -4, kmDelta: 0.6, traffic: 'ุฑูุงู', type: 'ุจุฒุฑฺฏุฑุงู' },
    note: 'ฺฉูุชุฑู ุฒูุงูุ ุงุญุชูุงู ุชููู ฺฉูุชุฑ.'
  },
  {
    id: 2,
    title: 'ูุณุฑ ุณุจุฒ ู ุฒุจุง',
    icon: 'leaf',
    color: 'border-green-200 bg-green-50',
    iconClass: 'text-green-500',
    meta: { minutesDelta: +5, kmDelta: -0.2, traffic: 'ูุชูุณุท', type: 'ูพุงุฑฺฉ/ุฎุงุจุงู' },
    note: 'ฺฏุฐุฑ ุงุฒ ูุถุง ุณุจุฒุ ุชุฌุฑุจู ุขุฑุงูโุชุฑ.'
  },
  {
    id: 3,
    title: 'ุงููโุชุฑู ูุณุฑ',
    icon: 'shield',
    color: 'border-blue-200 bg-blue-50',
    iconClass: 'text-blue-500',
    meta: { minutesDelta: +2, kmDelta: +0.1, traffic: 'ูุชูุณุท', type: 'ูพุฑุชุฑุฏุฏ/ุฑูุดู' },
    note: 'ุฑูุดูุง ุจูุชุฑ ู ูุณุฑูุง ูพุฑุชุฑุฏุฏ.'
  }
];


    const OPPORTUNITIES = [
  {
    id: 'opp_1',
    type: 'ูฺฉุงู',
    title: 'ูพุงุฑฺฉ ุฌูฺฏู (ูุฎุตูุต ุญูุงูุงุช)',
    subtitle: 'ฒ.ต ฺฉูููุชุฑ โข ููุงุณุจ ุณฺฏโฺฏุฑุฏุงู',
    location: 'ูพุงุฑฺฉ ุฌูฺฏู',
    badge: 'ูพุชโูุฑูุฏู',
    icon: 'paw-print',
    iconColor: 'text-orange-500',
    image: 'https://images.unsplash.com/photo-1601758228041-f3b2795255f1?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
    tags: ['ูพุชโูุฑูุฏู', 'ูุถุง ุจุงุฒ'],
    rating: 4.6,
reviews: [
  { name: 'ูุฑู', date: 'ฑดฐด/ฐน/ฑฒ', text: 'ุฎู ุชูุฒ ู ุงูู ุจูุฏ. ุจุฑุง ุณฺฏโฺฏุฑุฏุงู ุนุงูู.' },
  { name: 'ุนู', date: 'ฑดฐด/ฑฐ/ฐฑ', text: 'ุตุจุญโูุง ุฎููุชโุชุฑู ู ููุง ูู ุจูุชุฑู.' },
  { name: 'ุณุงุฑุง', date: 'ฑดฐด/ฑฐ/ฑต', text: 'ูุถุง ุจุงุฒ ุฎูุจ ู ูุณุฑ ูพุงุฏูโุฑู ููุงุณุจ ุฏุงุดุช.' }
],

    desc: 'ูุญุท ุขุฑุงู ู ุงูู ุจุฑุง ูุฏูโุฒุฏู ู ุจุงุฒ ุญูุงูุงุช. ุจูุชุฑู ุฒูุงู ุจุงุฒุฏุฏ ุตุจุญ ุฒูุฏ ุง ุนุตุฑ ุงุณุช.'
  },
  {
    id: 'opp_2',
    type: 'ุงููุช',
    title: 'ูพุงุฏูโุฑู ุฏุณุชูโุฌูุน ุตุจุญฺฏุงู',
    subtitle: 'ูุฑุฏุง ุณุงุนุช ท:ฐฐ โข ูพุงุฑฺฉ ูุงูู',
    location: 'ูพุงุฑฺฉ ูุงูู',
    badge: 'ุฑุงฺฏุงู',
    icon: 'users',
    iconColor: 'text-blue-500',
    image: 'https://images.unsplash.com/photo-1472289065668-ce650ac443d2?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
    tags: ['ุงุฌุชูุงุน', 'ุฑุงฺฏุงู'],
    rating: 4.3,
reviews: [
  { name: 'ุฑุถุง', date: 'ฑดฐด/ฑฐ/ฐต', text: 'ฺฏุฑูู ุฎู ุตูู ุจูุฏุ ุงูุฑฺ ุฎูุจ ุฏุงุดุช.' },
  { name: 'ูฺฏู', date: 'ฑดฐด/ฑฐ/ฒฐ', text: 'ุฒูุงูโุจูุฏ ุฎูุจ ุจูุฏุ ฺฉุงุด ูุณุฑ ฺฉู ุทููุงูโุชุฑ ุจูุฏ.' }
],

    desc: 'ฺฉ ูพุงุฏูโุฑู ฺฏุฑูู ุณุจฺฉ ุจุฑุง ุดุฑูุน ูพุฑุงูุฑฺ ุฑูุฒ. ููุงุณุจ ุจุฑุง ุขุดูุง ุจุง ุงูุฑุงุฏ ุฌุฏุฏ.'
  },
  {
    id: 'opp_3',
    type: 'ูฺฉุงู',
    title: 'ฺฉุงูู ฺฉุชุงุจ ู ฺฏูุชฺฏู',
    subtitle: 'ตฐฐ ูุชุฑ โข ฺฉุงูู ูุงุฏุฑ',
    location: 'ฺฉุงูู ูุงุฏุฑ',
    badge: 'ูุฑููฺฏ',
    icon: 'coffee',
    iconColor: 'text-amber-600',
    image: 'https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
    tags: ['ุขุฑุงูุด', 'ูุฑููฺฏ'],
    rating: 4.7,
reviews: [
  { name: 'ุงุณูู', date: 'ฑดฐด/ฐน/ฒธ', text: 'ูุถุง ุขุฑุงู ู ููุงุณุจ ูุทุงูุนู. ูููู ูู ุฎูุจ ุจูุฏ.' },
  { name: 'ูุญูุฏ', date: 'ฑดฐด/ฑฐ/ฐน', text: 'ูุญุท ููุณุชุงูฺฺฉ ู ฺฏูุชฺฏููุง ุฌุงูุจ.' },
  { name: 'ุฏูุง', date: 'ฑดฐด/ฑฐ/ฑธ', text: 'ุจุฑุง ูุฑุงุฑ ฺฉูุชุงู ุนุงููุ ุฎููุชโุชุฑ ุงุฒ ฺฉุงููโูุง ุดููุบ.' }
],

    desc: 'ูุถุง ุฏูุฌ ุจุฑุง ูุทุงูุนูุ ฺฏูุชฺฏู ู ุขุดูุง ุจุง ฺฉุชุงุจโูุง ุฌุฏุฏ. ูพุดููุงุฏ: ฺฉ ุณุงุนุช ุจุฏูู ููุจุงู.'
  },

  // ๐ฝ ฺูุฏุชุง ููุฑุฏ ุจุดุชุฑ (ูโุชูู ูุฑฺูุฏุฑ ุฎูุงุณุช ุงุถุงูู ฺฉู)
  {
    id: 'opp_4',
    type: 'ุงููุช',
    title: 'ูฺฏุง ุฏุฑ ูุถุง ุจุงุฒ',
    subtitle: 'ุฌูุนู ุณุงุนุช ถ:ณฐ โข ูพุงุฑฺฉ ุขุจโูโุขุชุด',
    location: 'ูพุงุฑฺฉ ุขุจโูโุขุชุด',
    badge: 'ุซุจุชโูุงู',
    icon: 'lotus',
    iconColor: 'text-teal-600',
    image: 'https://images.unsplash.com/photo-1545205597-3d9d02c29597?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
    tags: ['ุณูุงูุช', 'ุขุฑุงูุด'],
    rating: 4.4,
reviews: [
  { name: 'ุณูุงูู', date: 'ฑดฐด/ฑฐ/ฐฒ', text: 'ุชูุฑูโูุง ุณุจฺฉ ู ุฎูุจ ุจูุฏุ ูุฑุจ ุญุฑููโุง.' },
  { name: 'ฺฉุงูู', date: 'ฑดฐด/ฑฐ/ฑฑ', text: 'ุตุจุญ ุฒูุฏ ุนุงููุ ููุท ุฒุฑุงูุฏุงุฒ ุงุฏุชูู ูุฑู.' }
],

    desc: 'ฺฉูุงุณ ุณุจฺฉ ูฺฏุง ุจุฑุง ฺฉุงูุด ุงุณุชุฑุณ ู ุงูุฒุงุด ุชูุฑฺฉุฒ. ููุฑุงู ุฏุงุดุชู ุฒุฑุงูุฏุงุฒ ุชูุตู ูโุดูุฏ.'
  },
  {
    id: 'opp_5',
    type: 'ูฺฉุงู',
    title: 'ฺฏุงูุฑ ฺฉูฺฺฉ ููุฑ',
    subtitle: 'ฑ.ฒ ฺฉูููุชุฑ โข ููุงุดฺฏุงู ุงูุฑูุฒ',
    location: 'ุฎุงุจุงู ฺฉุฑูโุฎุงู',
    badge: 'ููุฑ',
    icon: 'image',
    iconColor: 'text-purple-600',
    image: 'https://images.unsplash.com/photo-1526481280695-3c687fd5432c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
    tags: ['ูุฑููฺฏ', 'ุงููุงูโุจุฎุด'],
    rating: 4.1,
reviews: [
  { name: 'ุงููุงู', date: 'ฑดฐด/ฐน/ฒฐ', text: 'ฺฉุงุฑูุง ูุชููุน ุจูุฏุ ุขุฏู ุงูฺฏุฒู ูโฺฏุฑู.' },
  { name: 'ูพูุงู', date: 'ฑดฐด/ฑฐ/ฐท', text: 'ฺฉูฺฺฉู ูู ุฌูุนโูุฌูุฑ ู ุฏูุณุชโุฏุงุดุชูู.' }
],

    desc: 'ููุงุด ุขุซุงุฑ ููุฑููุฏุงู ุฌูุงู. ฺฏุฒูู ุฎูุจ ุจุฑุง ฺฉ ูุฑุงุฑ ฺฉูุชุงู ุนุตุฑฺฏุงู.'
  },
  {
    id: 'opp_6',
    type: 'ุงููุช',
    title: 'ฺฉุงุฑฺฏุงู ุชููุณ ู ุขุฑุงูโุณุงุฒ',
    subtitle: 'ุณูโุดูุจู ุณุงุนุช ฑธ:ฐฐ โข ูุฑฺฉุฒ ุดูุฑ',
    location: 'ูุฑฺฉุฒ ุดูุฑ',
    badge: 'ณฐ ููุฑ',
    icon: 'wind',
    iconColor: 'text-sky-600',
    image: 'https://images.unsplash.com/photo-1506126613408-eca07ce68773?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
    tags: ['ุขุฑุงูุด', 'ุชูุฑฺฉุฒ'],
    rating: 4.5,
reviews: [
  { name: 'ุญุฏุซ', date: 'ฑดฐด/ฑฐ/ฐณ', text: 'ุชูุฑู ุชููุณ ุฎู ฺฉูฺฉ ฺฉุฑุฏุ ุญุณ ุจูุชุฑ ฺฏุฑูุชู.' },
  { name: 'ุขุฑุงุฏ', date: 'ฑดฐด/ฑฐ/ฑณ', text: 'ูุถุง ุฎูุจ ุจูุฏุ ูฺฉุชูโูุง ฺฉุงุฑุจุฑุฏ ฺฏูุชูุฏ.' },
  { name: 'ููุณุง', date: 'ฑดฐด/ฑฐ/ฒฑ', text: 'ุจุฑุง ฺฉุงูุด ุงุณุชุฑุณ ูุงูุนุงู ููุฏ ุจูุฏ.' }
],

    desc: 'ุชูุฑูโูุง ุณุงุฏู ุชููุณ ุจุฑุง ฺฉุงูุด ุงุถุทุฑุงุจ ู ุจูุจูุฏ ฺฉูุช ุฎูุงุจ.'
  }
];


    // State
    let activeTab = 'home';
    let currentMood = null;
    let selectedRoute = 2; // Default Green
    let activeMaslowLevel = null;
    let selectedDestinationId = 'hq';


    // Initialization
    document.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons();
      setRandomQuote();
      // Ensure default route styling is correct if user opens Routes first
      selectRoute(selectedRoute);

      // Routes init
renderRoutes();
const destInput = document.getElementById('routes-destination-search');
const destBox = document.getElementById('routes-destination-suggestions');

if (destInput) {
  // default value
  destInput.value = getSelectedDestination().name;

  destInput.addEventListener('input', (e) => {
    const q = (e.target.value || '').trim().toLowerCase();
    const results = !q
      ? DESTINATIONS
      : DESTINATIONS.filter(d => (d.name + ' ' + d.area).toLowerCase().includes(q));
    renderDestinationSuggestions(results.slice(0, 6));
  });

  destInput.addEventListener('focus', () => {
    renderDestinationSuggestions(DESTINATIONS.slice(0, 6));
  });

  // click outside to close
  document.addEventListener('click', (ev) => {
    if (!destBox) return;
    const isInside = ev.target.closest('#routes-destination-suggestions') || ev.target.closest('#routes-destination-search');
    if (!isInside) destBox.classList.add('hidden');
  });
}


      showAllOpportunities = false;

      // Opportunities init + search
    renderOpportunities(OPPORTUNITIES);
    const search = document.getElementById('search-input');
    if (search) search.addEventListener('input', (e) => applySearch(e.target.value));

    });

    // 1. Navigation Logic
    function switchTab(tabId) {
      document.querySelectorAll('.page-content').forEach(el => el.classList.add('hidden'));

    // Scroll to top on tab switch
    const main = document.getElementById('main-container');
    if (main) main.scrollTo({ top: 0, behavior: 'smooth' });



    const nextPage = document.getElementById(`page-${tabId}`);
    nextPage.classList.remove('hidden');

    // retrigger fade-in animation
    nextPage.classList.remove('fade-in');
    void nextPage.offsetWidth; // force reflow
    nextPage.classList.add('fade-in');


      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.remove('text-teal-600');
        btn.classList.add('text-gray-400');
      });

      if (tabId !== 'maslow') {
        const activeBtn = document.getElementById(`nav-${tabId}`);
        if (activeBtn) {
          activeBtn.classList.add('text-teal-600');
          activeBtn.classList.remove('text-gray-400');
        }

        const fab = document.getElementById('fab-maslow');
        const label = document.getElementById('label-maslow');
        fab.classList.remove('bg-teal-600', 'scale-110');
        fab.classList.add('bg-gray-800');
        label.classList.remove('text-teal-600');
        label.classList.add('text-gray-400');
      } else {
        const fab = document.getElementById('fab-maslow');
        const label = document.getElementById('label-maslow');
        fab.classList.remove('bg-gray-800');
        fab.classList.add('bg-teal-600', 'scale-110');
        label.classList.remove('text-gray-400');
        label.classList.add('text-teal-600');
      }

      activeTab = tabId;

      // refresh routes when entering routes tab
if (tabId === 'routes') {
  renderRoutes();
}


      // Recreate icons if content swapped (lucide sometimes needs this)
      lucide.createIcons();
    }

    // 2. Home Page Logic
    function setRandomQuote() {
    const quote = QUOTES[Math.floor(Math.random() * QUOTES.length)];
    document.getElementById('daily-quote').innerText = `"${quote}"`;
    }



    function setMood(mood) {
      currentMood = mood;

      document.querySelectorAll('.mood-btn').forEach(btn => {
        btn.classList.remove('bg-teal-100', 'ring-2', 'ring-teal-500', 'transform', 'scale-105');
        btn.classList.add('bg-white', 'shadow-sm');
        btn.querySelector('.icon-container').classList.remove('text-teal-600');
        btn.querySelector('.icon-container').classList.add('text-gray-500');
        btn.querySelector('.label-text').classList.remove('text-teal-800');
        btn.querySelector('.label-text').classList.add('text-gray-600');
      });

      const selectedBtn = document.getElementById(`btn-mood-${mood}`);
      selectedBtn.classList.remove('bg-white', 'shadow-sm');
      selectedBtn.classList.add('bg-teal-100', 'ring-2', 'ring-teal-500', 'transform', 'scale-105');
      selectedBtn.querySelector('.icon-container').classList.remove('text-gray-500');
      selectedBtn.querySelector('.icon-container').classList.add('text-teal-600');
      selectedBtn.querySelector('.label-text').classList.remove('text-gray-600');
      selectedBtn.querySelector('.label-text').classList.add('text-teal-800');

      const suggestionBox = document.getElementById('suggestion-box');
      const suggestionText = document.getElementById('suggestion-text');

      suggestionBox.classList.remove('hidden');
      if (mood === 'bad') {
        suggestionText.innerText = 'ุจู ูุธุฑ ูุงุฏ ุฑูุฒ ุณุฎุช ุฏุงุดุช. ฺฉ ููุณู ุขุฑุงูุดโุจุฎุด ุจุฑุงุช ุขูุงุฏู ฺฉุฑุฏู.';
      }
      else if(mood === 'meh'){
        suggestionText.innerText = 'ุจู ูุธุฑ ูุงุฏ ุญุงูุช ูุนููููุ ู ุงุณุชุฑุงุญุช ฺฉูุชุงู ุง ู ฺฉุงุฑ ฺฉูฺฺฉ ูโุชููู ุญุงูุชู ุจูุชุฑ ฺฉูู.';
      }
      else {
        suggestionText.innerText = 'ุจุฑุง ุญูุธ ุงู ุงูุฑฺ ุนุงูุ ูพุดููุงุฏ ูโฺฉูู ฑฐ ุฏููู ูพุงุฏูโุฑู ฺฉู.';
      }

      lucide.createIcons();
    }

    // 3. Routes Page Logic
    function selectRoute(id) {
  selectedRoute = id;
  renderRoutes();
}


    function getSelectedDestination() {
  return DESTINATIONS.find(d => d.id === selectedDestinationId) || DESTINATIONS[0];
}

function calcRouteForDestination(template, dest) {
  const minutes = Math.max(8, Math.round(dest.baseMinutes + template.meta.minutesDelta));
  const km = Math.max(0.5, +(dest.baseKm + template.meta.kmDelta).toFixed(1));
  return {
    ...template,
    minutes,
    km,
    traffic: template.meta.traffic,
    routeType: template.meta.type
  };
}

function renderRoutes() {
  const dest = getSelectedDestination();

  // update map label
  const labelEl = document.getElementById('routes-destination-label');
  if (labelEl) labelEl.textContent = dest.name;

  const listEl = document.getElementById('routes-list');
  if (!listEl) return;

  listEl.innerHTML = '';

  ROUTE_TEMPLATES.forEach(tpl => {
    const r = calcRouteForDestination(tpl, dest);

    const wrapper = document.createElement('div');
    wrapper.id = `route-card-${r.id}`;
    wrapper.onclick = () => selectRoute(r.id);
    wrapper.className = "route-card p-4 rounded-2xl border-2 cursor-pointer transition-all duration-300 flex items-center gap-4";

    // selection styling
    if (r.id === selectedRoute) {
      wrapper.classList.add(...r.color.split(' '), 'shadow-md');
    } else {
      wrapper.classList.add('border-gray-100', 'bg-white', 'hover:border-gray-200');
    }

    wrapper.innerHTML = `
      <div class="w-12 h-12 rounded-full flex items-center justify-center bg-white shadow-sm shrink-0">
        <i data-lucide="${r.icon}" class="${r.iconClass} w-5 h-5"></i>
      </div>

      <div class="flex-1 min-w-0">
        <div class="flex justify-between items-center mb-1 gap-3">
          <h4 class="font-bold text-gray-800 truncate">${r.title}</h4>
          <span class="text-sm font-bold text-gray-600 bg-white/50 px-2 py-0.5 rounded-lg shrink-0">
            ${r.minutes} ุฏููู
          </span>
        </div>

        <p class="text-xs text-gray-500">
          ${r.note}
        </p>

        <div class="mt-2 flex items-center gap-2 flex-wrap">
          <span class="text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded-md font-medium">
            ${r.km} ฺฉูููุชุฑ
          </span>
          <span class="text-[10px] ${r.traffic === 'ุฑูุงู' ? 'bg-green-50 text-green-600' : 'bg-amber-50 text-amber-600'} px-2 py-0.5 rounded-md font-medium">
            ุชุฑุงูฺฉ ${r.traffic}
          </span>
          <span class="text-[10px] bg-blue-50 text-blue-600 px-2 py-0.5 rounded-md font-medium">
            ${r.routeType}
          </span>
        </div>
      </div>

      <div class="check-icon w-6 h-6 rounded-full bg-teal-500 flex items-center justify-center ${r.id === selectedRoute ? '' : 'hidden'} shrink-0">
        <i data-lucide="check" class="text-white w-4 h-4"></i>
      </div>
    `;

    listEl.appendChild(wrapper);
  });

  lucide.createIcons();

  // keep route line highlight consistent
  [1,2,3].forEach(lineId => {
    const line = document.getElementById(`route-line-${lineId}`);
    if (!line) return;
    if (lineId === selectedRoute) {
      line.classList.remove('opacity-30');
      line.classList.add('opacity-100');
    } else {
      line.classList.remove('opacity-100');
      line.classList.add('opacity-30');
    }
  });
}


    // 4. Maslow Logic
    function toggleMaslow(levelId) {
      const el = document.getElementById(`maslow-${levelId}`);
      const title = el.querySelector('.level-title');
      const detail = el.querySelector('.level-detail');

      if (activeMaslowLevel === levelId) {
        el.classList.remove('h-24', 'shadow-lg', 'scale-105', 'z-10');
        el.classList.add('h-12', 'hover:scale-105');
        title.classList.remove('mb-8', 'text-lg');
        detail.classList.add('hidden');
        activeMaslowLevel = null;
      } else {
        if (activeMaslowLevel) {
          const prev = document.getElementById(`maslow-${activeMaslowLevel}`);
          const prevTitle = prev.querySelector('.level-title');
          const prevDetail = prev.querySelector('.level-detail');

          prev.classList.remove('h-24', 'shadow-lg', 'scale-105', 'z-10');
          prev.classList.add('h-12', 'hover:scale-105');
          prevTitle.classList.remove('mb-8', 'text-lg');
          prevDetail.classList.add('hidden');
        }

        el.classList.remove('h-12', 'hover:scale-105');
        el.classList.add('h-24', 'shadow-lg', 'scale-105', 'z-10');
        title.classList.add('mb-8', 'text-lg');
        detail.classList.remove('hidden');
        activeMaslowLevel = levelId;
      }
    }

    // 5. Opportunities (Home) + Search + Detail
let filteredOpportunities = [...OPPORTUNITIES];
let lastHomeTab = 'home';
let showAllOpportunities = false;


function renderStars(rating) {
  const r = Math.max(0, Math.min(5, rating || 0));
  const full = Math.floor(r);
  const hasHalf = r - full >= 0.5;

  let starsHtml = '';

  for (let i = 1; i <= 5; i++) {
    if (i <= full) {
      // full star
      starsHtml += `
        <svg class="w-4 h-4 fill-yellow-400 text-yellow-400" viewBox="0 0 24 24">
          <path d="M12 17.27L18.18 21l-1.64-7.03
                   L22 9.24l-7.19-.61L12 2
                   9.19 8.63 2 9.24l5.46 4.73
                   L5.82 21z"/>
        </svg>`;
    } else if (i === full + 1 && hasHalf) {
      // half star
      starsHtml += `
        <svg class="w-4 h-4 text-yellow-400" viewBox="0 0 24 24">
          <defs>
            <linearGradient id="halfGrad">
              <stop offset="50%" stop-color="#facc15"/>
              <stop offset="50%" stop-color="transparent"/>
            </linearGradient>
          </defs>
          <path fill="url(#halfGrad)" stroke="currentColor" stroke-width="1.5"
                d="M12 17.27L18.18 21l-1.64-7.03
                   L22 9.24l-7.19-.61L12 2
                   9.19 8.63 2 9.24l5.46 4.73
                   L5.82 21z"/>
        </svg>`;
    } else {
      // empty star
      starsHtml += `
        <svg class="w-4 h-4 text-gray-300" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
          <path d="M12 17.27L18.18 21l-1.64-7.03
                   L22 9.24l-7.19-.61L12 2
                   9.19 8.63 2 9.24l5.46 4.73
                   L5.82 21z"/>
        </svg>`;
    }
  }

  return `
    <div class="flex items-center gap-0.5">
      ${starsHtml}
      <span class="text-[11px] text-gray-600 font-bold mr-1">${r.toFixed(1)}</span>
    </div>
  `;
}



function renderOpportunities(list) {
  const container = document.getElementById('opportunities-list');
  const meta = document.getElementById('opps-meta');
  const empty = document.getElementById('opps-empty');
  if (!container) return;

  const showMoreBtn = document.getElementById('opps-show-more');
    const visibleList = showAllOpportunities ? list : list.slice(0, 3);


  container.innerHTML = '';

  meta.textContent = `${list.length} ููุฑุฏ ูพุฏุง ุดุฏ`;

  if (!list.length) {
    empty.classList.remove('hidden');
    return;
  }
  empty.classList.add('hidden');

  visibleList.forEach(item => {
    const tagsHtml = (item.tags || []).slice(0, 3).map(t => {
      // ุฑูฺฏ ุณุงุฏู ุจุฑ ุงุณุงุณ ููุน
      const base =
        item.type === 'ุงููุช'
          ? 'bg-blue-50 text-blue-600'
          : 'bg-green-50 text-green-600';
      return `<span class="text-[10px] ${base} px-2 py-0.5 rounded-md font-medium">${t}</span>`;
    }).join('');

    const card = document.createElement('div');
    card.className = 'bg-white border border-gray-100 p-3 rounded-2xl flex gap-3 shadow-sm hover:shadow-md transition-shadow cursor-pointer';
    card.onclick = () => openOpportunityDetail(item.id);

    card.innerHTML = `
      <div class="relative w-24 h-24 shrink-0">
        <img src="${item.image}" alt="${item.title}" class="w-full h-full rounded-xl object-cover">
        <div class="absolute top-1 right-1 bg-white/90 p-1 rounded-full shadow-sm">
          <i data-lucide="${item.icon}" class="w-3.5 h-3.5 ${item.iconColor}"></i>
        </div>
      </div>
      <div class="flex flex-col justify-center flex-1 min-w-0">
        <h4 class="font-bold text-gray-800 text-sm truncate">${item.title}</h4>
        <p class="text-xs text-gray-500 mt-1 flex items-center gap-1">
          <i data-lucide="${item.type === 'ุงููุช' ? 'clock' : 'map-pin'}" class="w-3 h-3 text-gray-400"></i>
          <span class="truncate">${item.subtitle}</span>
        </p>
        <div class="mt-2 flex items-center gap-2 flex-wrap">
          ${tagsHtml}
        </div>
        <div class="mt-2 flex items-center justify-between">
  <div class="flex items-center">
    ${renderStars(item.rating)}
  </div>
  <span class="text-[11px] text-gray-400">
    ${(item.reviews?.length || 0)} ูุธุฑ
  </span>
</div>

      </div>
    `;

    container.appendChild(card);
  });

  // Show more button logic
if (showMoreBtn) {
  if (!showAllOpportunities && list.length > 3) {
    showMoreBtn.classList.remove('hidden');
    showMoreBtn.onclick = () => {
      showAllOpportunities = true;
      renderOpportunities(list);
    };
  } else {
    showMoreBtn.classList.add('hidden');
  }
}


  lucide.createIcons();
}

function applySearch(query) {
  const q = (query || '').trim().toLowerCase();
  showAllOpportunities = false;


  if (!q) {
    filteredOpportunities = [...OPPORTUNITIES];
  } else {
    filteredOpportunities = OPPORTUNITIES.filter(it => {
      const hay = [
        it.type, it.title, it.subtitle, it.location, it.badge,
        ...(it.tags || []), it.desc
      ].join(' ').toLowerCase();
      return hay.includes(q);
    });
  }
  renderOpportunities(filteredOpportunities);
}

function openOpportunityDetail(id) {
  const item = OPPORTUNITIES.find(x => x.id === id);
  if (!item) return;

  // ุงุฏููู ุจุงุดู ุงุฒ ฺฉุฌุง ุงููุฏู
  lastHomeTab = activeTab;

  document.getElementById('opp-detail-title').textContent = item.title;
  document.getElementById('opp-detail-sub').textContent = item.subtitle;
  document.getElementById('opp-detail-img').src = item.image;
  document.getElementById('opp-detail-img').alt = item.title;
  document.getElementById('opp-detail-type').textContent = item.type;
  document.getElementById('opp-detail-loc').textContent = item.location || '';
  document.getElementById('opp-detail-badge').textContent = item.badge || '';
  document.getElementById('opp-detail-desc').textContent = item.desc || '';

  const tagsWrap = document.getElementById('opp-detail-tags');
  tagsWrap.innerHTML = (item.tags || []).map(t => {
    return `<span class="text-[11px] bg-gray-50 text-gray-700 px-3 py-1 rounded-xl border border-gray-100">${t}</span>`;
  }).join('');

  // Rating in detail
const ratingEl = document.getElementById('opp-detail-rating');
const countEl = document.getElementById('opp-detail-reviews-count');
const reviewsWrap = document.getElementById('opp-detail-reviews');

const reviewCount = item.reviews?.length || 0;

if (ratingEl) ratingEl.innerHTML = renderStars(item.rating);
if (countEl) countEl.textContent = `${reviewCount} ูุธุฑ ุซุจุช ุดุฏู`;

if (reviewsWrap) {
  if (!reviewCount) {
    reviewsWrap.innerHTML = `<div class="bg-gray-50 border border-gray-100 rounded-2xl p-4 text-sm text-gray-500">ูููุฒ ูุธุฑ ุซุจุช ูุดุฏู.</div>`;
  } else {
    reviewsWrap.innerHTML = item.reviews.map(r => `
      <div class="bg-gray-50 border border-gray-100 rounded-2xl p-4">
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm font-bold text-gray-700">${r.name}</span>
          <span class="text-[11px] text-gray-400">${r.date}</span>
        </div>
        <p class="text-sm text-gray-600 leading-relaxed text-justify">${r.text}</p>
      </div>
    `).join('');
  }
}


  // ุฑูุชู ุจู ุตูุญู ุฌุฒุฆุงุช
  switchTab('opportunity');
}

function closeOpportunityDetail() {
  // ุจุฑฺฏุฑุฏ ุจู ุชุจ ูุจู (ูุนูููุงู home)
  switchTab(lastHomeTab || 'home');
}

function renderDestinationSuggestions(items) {
  const box = document.getElementById('routes-destination-suggestions');
  if (!box) return;

  if (!items.length) {
    box.innerHTML = `<div class="p-4 text-sm text-gray-500">ูุชุฌูโุง ูพุฏุง ูุดุฏ</div>`;
    box.classList.remove('hidden');
    return;
  }

  box.innerHTML = items.map(d => `
    <button class="w-full text-right px-4 py-3 hover:bg-gray-50 transition flex items-center justify-between"
            onclick="selectDestination('${d.id}')">
      <span class="font-bold text-sm text-gray-700">${d.name}</span>
      <span class="text-xs text-gray-400">${d.area}</span>
    </button>
  `).join('');

  box.classList.remove('hidden');
}

function selectDestination(destId) {
  selectedDestinationId = destId;

  // close suggestions
  const box = document.getElementById('routes-destination-suggestions');
  if (box) box.classList.add('hidden');

  const input = document.getElementById('routes-destination-search');
  const dest = getSelectedDestination();
  if (input) input.value = dest.name;

  renderRoutes();
}



  </script>
</body>
</html>

